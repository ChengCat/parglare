<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Igor Dejanović">
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Error recovery - parglare</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  <link href="../style.css" rel="stylesheet">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Error recovery";
    var mkdocs_page_input_path = "recovery.md";
    var mkdocs_page_url = "/recovery/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script> 
  
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-68681917-1', 'igordejanovic.net');
      ga('send', 'pageview');
  </script>
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> parglare</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="..">Home</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>User Guide</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../getting_started/">Getting started</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../grammar/">Grammar</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../parser/">Parser parameters</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../actions/">Actions</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../recognizers/">Recognizers</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../conflicts/">Conflicts resolving</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../parse_trees/">Parse trees</a>
        
    </li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">Error recovery</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#error-recovery">Error recovery</a></li>
                
                    <li><a class="toctree-l4" href="#custom-recovery-strategy">Custom recovery strategy</a></li>
                
            
            </ul>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../pglr/">pglr command</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../debugging/">Debugging</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>About</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../about/CONTRIBUTING/">Contributing</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../about/LICENSE/">License</a>
        
    </li>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">parglare</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>User Guide &raquo;</li>
        
      
    
    <li>Error recovery</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/igordejanovic/parglare/edit/master/docs/recovery.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="error-recovery">Error recovery<a class="headerlink" href="#error-recovery" title="Permanent link">&para;</a></h1>
<p>There are a lot of situations where you would want parser to report all the
errors in one go. To do this, parser has to recover from the errors, i.e. get to
the valid state and continue.</p>
<p>To enable error recovery set <code>error_recovery</code> parameter to parser construction
to <code>True</code>. This will enable implicit error recovery strategy that will simply
drop characther/object at the place of the error and try to continue. All errors
will be collected as an <code>errors</code> list on the parser instance.</p>
<p>Each error is an instance of <code>parglare.Error</code> class. This class has the
following attributes:</p>
<ul>
<li><code>position</code> - absolute position of the error,</li>
<li><code>length</code> - the length of erroneous part of input,</li>
<li><code>message</code> - error message.</li>
<li><code>input_str</code> - The input string/list of objects.</li>
<li><code>expected_symbol</code> - A set of grammar symbols expected at the location.</li>
</ul>
<p>which are supplied to the <code>Error</code> constructor to build a new instance. Either a
<code>message</code> or <code>input_str</code> with <code>expected_symbols</code> should be provided. If
<code>message</code> is given it is used as a string representation of the error, otherwise
the message is constructed based on other parameters.</p>
<p><code>position</code> can be converted to <code>line, column</code> by calling
<code>parglare.pos_to_line_col(input, position)</code>.</p>
<h2 id="custom-recovery-strategy">Custom recovery strategy<a class="headerlink" href="#custom-recovery-strategy" title="Permanent link">&para;</a></h2>
<p>To provide a custom strategy for error recovery set <code>error_recovery</code> to a Python
function. This function should have the following signature:</p>
<pre><code>def error_recovery_strategy(parser, input, position, expected_symbols):
    ...
</code></pre>
<ul>
<li><code>parser</code> - instance of the parser, should be used only for querying the
   configuration, not for altering the state,</li>
<li><code>input</code> - the input string/list,</li>
<li><code>position</code> - the position in the input where the error has been found,</li>
<li><code>expected_symbols</code> - a set grammar symbols that are expected at this
   position.</li>
</ul>
<p>The recovery function should return the tuple <code>(error, position, token)</code>.
<code>error</code> should be an instance of <code>parglare.Error</code> class or <code>None</code> if no error
should be reported. <code>position</code> should be a new position where the parser should
continue or <code>None</code> if token is introduced. <code>token</code> should be a new token
introduced at the given position or <code>None</code> if position is advanced.</p>
<p>So, either position should be advanced if input is skipped, or new token should
be returned if a new token is introduced at the position. You can't both
advance position and introduce new token at the same time.</p>
<p>The <code>token</code> symbol should be from the <code>expected_symbols</code> for the parser to
recover successfully. <code>token</code> should be an instance of <code>parser.Token</code>. This
class constructor accepts <code>symbol</code>, <code>value</code> and <code>length</code>. <code>symbol</code> should a
grammar symbol from <code>expected_symbols</code>, <code>value</code> should be a matched part of
the input (actually, this value is a made-up value here) and length is the
length of the token. For introduced tokens, length should be set to 0.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../pglr/" class="btn btn-neutral float-right" title="pglr command">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../parse_trees/" class="btn btn-neutral" title="Parse trees"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>Copyright &copy; 2017 <a href="http://igordejanovic.net/">Igor Dejanović</a>.</p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>
    
  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/igordejanovic/parglare" class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../parse_trees/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../pglr/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script src="../js/theme.js"></script>

</body>
</html>
